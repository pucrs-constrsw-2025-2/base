{
	"info": {
		"_postman_id": "employees-api-collection",
		"name": "Employees API",
		"description": "REST API para gerenciamento de funcionários e tarefas",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Employees",
			"item": [
				{
					"name": "Create Employee",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"contractNumber\": 12345,\n  \"name\": \"João Silva\",\n  \"role\": \"Desenvolvedor Senior\",\n  \"salary\": 8500.50,\n  \"organizationalUnit\": \"TI\",\n  \"room\": {\n    \"idRoom\": \"550e8400-e29b-41d4-a716-446655440000\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/employees",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees"
							]
						},
						"description": "Criar um novo funcionário"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"contractNumber\": 12345,\n  \"name\": \"João Silva\",\n  \"role\": \"Desenvolvedor Senior\",\n  \"salary\": 8500.50,\n  \"organizationalUnit\": \"TI\",\n  \"room\": {\n    \"idRoom\": \"550e8400-e29b-41d4-a716-446655440000\"\n  }\n}"
								},
								"url": {
									"raw": "{{base_url}}/employees",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440001\",\n  \"contractNumber\": 12345,\n  \"name\": \"João Silva\",\n  \"role\": \"Desenvolvedor Senior\",\n  \"salary\": 8500.50,\n  \"organizationalUnit\": \"TI\",\n  \"tasks\": [],\n  \"room\": {\n    \"idRoom\": \"550e8400-e29b-41d4-a716-446655440000\"\n  }\n}"
						}
					]
				},
				{
					"name": "Get All Employees",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees?page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"description": "Número da página"
								},
								{
									"key": "limit",
									"value": "10",
									"description": "Itens por página"
								},
								{
									"key": "search",
									"value": "",
									"description": "Busca por contract_number, name ou organizational_unit",
									"disabled": true
								}
							]
						},
						"description": "Listar todos os funcionários com paginação"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/employees?page=1&limit=10",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "10"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"employees\": [\n    {\n      \"id\": \"550e8400-e29b-41d4-a716-446655440001\",\n      \"contractNumber\": 12345,\n      \"name\": \"João Silva\",\n      \"role\": \"Desenvolvedor Senior\",\n      \"salary\": 8500.50,\n      \"organizationalUnit\": \"TI\",\n      \"tasks\": [],\n      \"room\": {\n        \"idRoom\": \"550e8400-e29b-41d4-a716-446655440000\"\n      }\n    }\n  ],\n  \"total\": 1,\n  \"page\": 1,\n  \"limit\": 10\n}"
						}
					]
				},
				{
					"name": "Search Employees",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees?page=1&limit=10&search=João",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "search",
									"value": "João",
									"description": "Busca por contract_number, name ou organizational_unit"
								}
							]
						},
						"description": "Buscar funcionários por contract_number, name ou organizational_unit"
					},
					"response": []
				},
				{
					"name": "Get Employee by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}"
							]
						},
						"description": "Obter funcionário por ID"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/employees/550e8400-e29b-41d4-a716-446655440001",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees",
										"550e8400-e29b-41d4-a716-446655440001"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440001\",\n  \"contractNumber\": 12345,\n  \"name\": \"João Silva\",\n  \"role\": \"Desenvolvedor Senior\",\n  \"salary\": 8500.50,\n  \"organizationalUnit\": \"TI\",\n  \"tasks\": [],\n  \"room\": {\n    \"idRoom\": \"550e8400-e29b-41d4-a716-446655440000\"\n  }\n}"
						}
					]
				},
				{
					"name": "Update Employee (PUT)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"salary\": 9000.00,\n  \"organizationalUnit\": \"Desenvolvimento\",\n  \"room\": {\n    \"idRoom\": \"550e8400-e29b-41d4-a716-446655440001\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}"
							]
						},
						"description": "Atualizar funcionário completamente"
					},
					"response": []
				},
				{
					"name": "Update Employee (PATCH)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"salary\": 9500.00\n}"
						},
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}"
							]
						},
						"description": "Atualizar funcionário parcialmente"
					},
					"response": []
				},
				{
					"name": "Delete Employee",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}"
							]
						},
						"description": "Deletar funcionário"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/employees/550e8400-e29b-41d4-a716-446655440001",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees",
										"550e8400-e29b-41d4-a716-446655440001"
									]
								}
							},
							"status": "No Content",
							"code": 204,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [],
							"body": ""
						}
					]
				}
			],
			"description": "Endpoints para gerenciamento de funcionários"
		},
		{
			"name": "Tasks",
			"item": [
				{
					"name": "Get Employee Tasks",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks?page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"description": "Número da página"
								},
								{
									"key": "limit",
									"value": "10",
									"description": "Itens por página"
								},
								{
									"key": "description",
									"value": "",
									"description": "Filtrar por descrição da tarefa",
									"disabled": true
								},
								{
									"key": "startDate",
									"value": "",
									"description": "Data de início do período (YYYY-MM-DD)",
									"disabled": true
								},
								{
									"key": "endDate",
									"value": "",
									"description": "Data de fim do período (YYYY-MM-DD)",
									"disabled": true
								}
							]
						},
						"description": "Listar tarefas do funcionário"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/employees/550e8400-e29b-41d4-a716-446655440001/tasks?page=1&limit=10",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees",
										"550e8400-e29b-41d4-a716-446655440001",
										"tasks"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "10"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440002\",\n    \"description\": \"Implementar sistema completo de autenticação OAuth2\",\n    \"startDate\": \"2024-01-15\",\n    \"expectedEndDate\": \"2024-02-15\",\n    \"actualEndDate\": \"2024-02-10\",\n    \"employeeId\": \"550e8400-e29b-41d4-a716-446655440001\"\n  }\n]"
						}
					]
				},
				{
					"name": "Search Employee Tasks",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks?page=1&limit=10&description=autenticação",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "description",
									"value": "autenticação",
									"description": "Filtrar por descrição da tarefa"
								}
							]
						},
						"description": "Buscar tarefas por descrição"
					},
					"response": []
				},
				{
					"name": "Filter Tasks by Date Range",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks?page=1&limit=10&startDate=2024-01-01&endDate=2024-12-31",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "startDate",
									"value": "2024-01-01",
									"description": "Data de início do período"
								},
								{
									"key": "endDate",
									"value": "2024-12-31",
									"description": "Data de fim do período"
								}
							]
						},
						"description": "Filtrar tarefas por período de datas"
					},
					"response": []
				},
				{
					"name": "Create Employee Task",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"description\": \"Implementar validação de dados com melhorias\",\n  \"startDate\": \"2024-03-01\",\n  \"expectedEndDate\": \"2024-03-15\",\n  \"actualEndDate\": \"2024-03-12\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks"
							]
						},
						"description": "Criar nova tarefa para o funcionário"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"description\": \"Implementar validação de dados com melhorias\",\n  \"startDate\": \"2024-03-01\",\n  \"expectedEndDate\": \"2024-03-15\",\n  \"actualEndDate\": \"2024-03-12\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/employees/550e8400-e29b-41d4-a716-446655440001/tasks",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees",
										"550e8400-e29b-41d4-a716-446655440001",
										"tasks"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440003\",\n  \"description\": \"Implementar validação de dados com melhorias\",\n  \"startDate\": \"2024-03-01\",\n  \"expectedEndDate\": \"2024-03-15\",\n  \"actualEndDate\": \"2024-03-12\",\n  \"employeeId\": \"550e8400-e29b-41d4-a716-446655440001\"\n}"
						}
					]
				},
				{
					"name": "Get Employee Task by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks/{{task_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks",
								"{{task_id}}"
							]
						},
						"description": "Obter tarefa específica do funcionário"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/employees/550e8400-e29b-41d4-a716-446655440001/tasks/550e8400-e29b-41d4-a716-446655440002",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees",
										"550e8400-e29b-41d4-a716-446655440001",
										"tasks",
										"550e8400-e29b-41d4-a716-446655440002"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440002\",\n  \"description\": \"Implementar sistema completo de autenticação OAuth2\",\n  \"startDate\": \"2024-01-15\",\n  \"expectedEndDate\": \"2024-02-15\",\n  \"actualEndDate\": \"2024-02-10\",\n  \"employeeId\": \"550e8400-e29b-41d4-a716-446655440001\"\n}"
						}
					]
				},
				{
					"name": "Update Employee Task (PUT)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"description\": \"Implementar sistema completo de autenticação OAuth2 com integração ao Keycloak\",\n  \"startDate\": \"2024-01-15\",\n  \"expectedEndDate\": \"2024-02-20\",\n  \"actualEndDate\": \"2024-02-10\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks/{{task_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks",
								"{{task_id}}"
							]
						},
						"description": "Atualizar tarefa completamente"
					},
					"response": []
				},
				{
					"name": "Update Employee Task (PATCH)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"actualEndDate\": \"2024-02-12\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks/{{task_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks",
								"{{task_id}}"
							]
						},
						"description": "Atualizar tarefa parcialmente"
					},
					"response": []
				},
				{
					"name": "Delete Employee Task",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/employees/{{employee_id}}/tasks/{{task_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"employees",
								"{{employee_id}}",
								"tasks",
								"{{task_id}}"
							]
						},
						"description": "Deletar tarefa do funcionário"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/employees/550e8400-e29b-41d4-a716-446655440001/tasks/550e8400-e29b-41d4-a716-446655440002",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"employees",
										"550e8400-e29b-41d4-a716-446655440001",
										"tasks",
										"550e8400-e29b-41d4-a716-446655440002"
									]
								}
							},
							"status": "No Content",
							"code": 204,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [],
							"body": ""
						}
					]
				}
			],
			"description": "Endpoints para gerenciamento de tarefas dos funcionários"
		},
		{
			"name": "Health Check",
			"item": [
				{
					"name": "Health Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/actuator/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"actuator",
								"health"
							]
						},
						"description": "Verificar status de saúde da aplicação"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/actuator/health",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"actuator",
										"health"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"status\": \"UP\",\n  \"components\": {\n    \"mongo\": {\n      \"status\": \"UP\",\n      \"details\": {\n        \"database\": \"Employees\",\n        \"validationQuery\": \"{ ping: 1 }\"\n      }\n    }\n  }\n}"
						}
					]
				},
				{
					"name": "Application Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/actuator/info",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"actuator",
								"info"
							]
						},
						"description": "Obter informações da aplicação"
					},
					"response": []
				}
			],
			"description": "Endpoints de monitoramento e saúde da aplicação"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-generate UUIDs for new entities if not set",
					"if (!pm.environment.get('employee_id')) {",
					"    pm.environment.set('employee_id', '550e8400-e29b-41d4-a716-446655440001');",
					"}",
					"",
					"if (!pm.environment.get('task_id')) {",
					"    pm.environment.set('task_id', '550e8400-e29b-41d4-a716-446655440002');",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-extract IDs from responses",
					"if (pm.response.code === 201 || pm.response.code === 200) {",
					"    const responseJson = pm.response.json();",
					"    ",
					"    if (responseJson.id) {",
					"        if (pm.info.requestName.includes('Employee')) {",
					"            pm.environment.set('employee_id', responseJson.id);",
					"        } else if (pm.info.requestName.includes('Task')) {",
					"            pm.environment.set('task_id', responseJson.id);",
					"        }",
					"    }",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080/api/v1",
			"type": "string"
		}
	]
}

